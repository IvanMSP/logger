<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />


  <title>Template Method</title>


  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="referrer" content="origin" />
  <meta name="generator" content="Pelican" />
<link href="./templated-method.html" rel="canonical" />
  <!-- Feed -->

  <link href="./theme/css/style.css" type="text/css" rel="stylesheet" />

  <!-- Code highlight color scheme -->
      <link href="./theme/css/code_blocks/darkly.css" rel="stylesheet">


  <!-- Custom fonts -->
  <link href='https://fonts.googleapis.com/css?family=Montserrat:400,300' rel='stylesheet' type='text/css' />
  <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet" type="text/css" />

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
  <![endif]-->



    <meta name="description" content="El template method es un patrón de diseño de comportamiento que define el esqueleto de un algoritmo en una clase base y permite que...">

    <meta name="author" content="ivan">

    <meta name="tags" content="patterns">
    <meta name="tags" content="python">




<!-- Open Graph -->
<meta prefix="og: http://ogp.me/ns#" property="og:site_name" content="Logger"/>
<meta prefix="og: http://ogp.me/ns#" property="og:title" content="Template Method"/>
<meta prefix="og: http://ogp.me/ns#" property="og:description" content="El template method es un patrón de diseño de comportamiento que define el esqueleto de un algoritmo en una clase base y permite que..."/>
<meta prefix="og: http://ogp.me/ns#" property="og:locale" content="en_US"/>
<meta prefix="og: http://ogp.me/ns#" property="og:url" content="./templated-method.html"/>
<meta prefix="og: http://ogp.me/ns#" property="og:type" content="article"/>
<meta prefix="og: http://ogp.me/ns#" property="article:published_time" content="2021-08-31 21:00:00-05:00"/>
<meta prefix="og: http://ogp.me/ns#" property="article:modified_time" content=""/>
<meta prefix="og: http://ogp.me/ns#" property="article:author" content="./author/ivan.html">
<meta prefix="og: http://ogp.me/ns#" property="article:section" content="misc"/>
<meta prefix="og: http://ogp.me/ns#" property="article:tag" content="patterns"/>
<meta prefix="og: http://ogp.me/ns#" property="article:tag" content="python"/>
<meta prefix="og: http://ogp.me/ns#" property="og:image" content="./theme/images/post-bg.jpg">

<!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@BawbamGeek">
    <meta name="twitter:title" content="Template Method">
    <meta name="twitter:url" content="./templated-method.html">

        <meta name="twitter:image:src" content="./theme/images/post-bg.jpg">

      <meta name="twitter:description" content="El template method es un patrón de diseño de comportamiento que define el esqueleto de un algoritmo en una clase base y permite que...">

<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Article",
  "name": "Template Method",
  "headline": "Template Method",
  "datePublished": "2021-08-31 21:00:00-05:00",
  "dateModified": "",
  "author": {
    "@type": "Person",
    "name": "ivan",
    "url": "./author/ivan.html"
  },
  "image": "./theme/images/post-bg.jpg",
  "url": "./templated-method.html",
  "description": "El template method es un patrón de diseño de comportamiento que define el esqueleto de un algoritmo en una clase base y permite que..."
}
</script>
</head>
<!-- TODO : Body class -->
<body class="home-template">

<nav id="menu">
  <a class="close-button">Close</a>
  <div class="nav-wrapper">
    <p class="nav-label">Menu</p>
    <ul>

              <li role="presentation"><a href="./pages/bienvenido.html">¡Hey soy Ivan! 🐧</a></li>
              <li role="presentation"><a href="./pages/books.html">Libros 📘</a></li>
              <li role="presentation"><a href="./pages/créditos.html">Créditos 😎</a></li>

    </ul>
  </div>
</nav>
    <!-- Progressbar -->
    <div class="progress-container">
        <span class="progress-bar"></span>
    </div>

    <!-- Page Header -->
    <!-- Set your background image for this header on the line below. -->
    <header id="post-header" >
      <div class="inner">
        <nav id="navigation">
            <span id="home-button" class="nav-button">
                <a class="home-button" href="./" title="Home"><i class="ic ic-arrow-left"></i> Home</a>
            </span>
          <span id="menu-button" class="nav-button">
            <a class="menu-button"><i class="ic ic-menu"></i> Menu</a>
          </span>
        </nav>
        <h1 class="post-title">Template Method</h1>
        <!-- TODO : Proper class for headline -->
        <span class="post-meta">
                <a href="./author/ivan.html">Ivan López</a>
            | <time datetime="mar 31 agosto 2021">mar 31 agosto 2021</time>
        </span>
        <!-- TODO : Modified check -->
      </div>
    </header>

  <section id="wrapper">
    <a class="hidden-close"></a>

    <!-- Post content -->
    <main class="content" role="main">
        <article class="post">
        <div class="inner">
            <section class="post-content">
                <p>El template method es un patrón de diseño de comportamiento que define el esqueleto de un algoritmo en una clase base y permite que otras subclases puedan sobrescribir sin modificar la estructura.</p>
<p><img alt="https://i.imgur.com/EM5pyis.png" src="https://i.imgur.com/EM5pyis.png"></p>
<p>Como puedes ver en el diagrama, se define una clase abstracta donde se define la función para el <strong>template_method()</strong>, que es donde se declara el orden de los demás métodos [<strong><em>step_one(), step_two()...</em></strong>]  y a su vez se declaran los métodos de ese <strong>template_method()</strong>, estos métodos pueden tener una implementación o pueden ser implementados en una clase concreta.</p>
<p>Las clases concretas [<strong><em>Concrete Class A, Concrete Class B...</em></strong>] pueden sobrescribir todos los métodos de <strong>Abstract Class</strong> pero no el <strong>template_method()</strong> .</p>
<p><strong>Contexto:</strong></p>
<p>Estos días he estado estudiando como extraer información de diferentes sitios web y  tuve un problema donde no podía extraer la información de la manera que había investigado, entonces  tuve que investigar otras formas de como extraer información. </p>
<p>Es donde me puse a analizar un poco y pude obtener lo siguiente:</p>
<ul>
<li>Extraer la información de un sitio web, lo hago en varios pasos en orden, es decir:<ul>
<li>Recibe una url</li>
<li>Realiza la request a la url</li>
<li>Obtiene el response</li>
<li>Del response obtiene el content</li>
<li>Del content obtengo las clases que necesito</li>
<li>La información que se obtiene la guardo en la db.</li>
</ul>
</li>
<li>La manera de extraer información de diferentes sitios, puede ser que utilice diferentes herramientas para llevarlo acabo,  pero podemos seguir los mismos pasos.</li>
</ul>
<p>Llegando a la conclusión de que podia implementar <strong>Template Method.</strong> Si te das cuenta el problema tiene todas las características para poder llevar una implementación del patrón.</p>
<p><strong>Solución</strong>.  </p>
<p><img alt="https://i.imgur.com/h21T7oE.png" src="https://i.imgur.com/h21T7oE.png"></p>
<p>Creando la clase abstracta en python:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">annotations</span>
<span class="kn">from</span> <span class="nn">abc</span> <span class="kn">import</span> <span class="n">ABC</span><span class="p">,</span> <span class="n">abstractmethod</span>

<span class="k">class</span> <span class="nc">AbstractClass</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Clase abstracta para definir nuestro template method para hacer scrapping</span>
<span class="sd">    de sitios webs.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">template_method</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Estos son los pasos necesarios para scrappear un sitio web.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">make_request</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_content</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_data_from_classes</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_to_db</span><span class="p">()</span>

    <span class="c1"># Métodos implementados en la clase abstracta</span>
    <span class="c1"># Se aplican para todos los sitios web</span>
    <span class="k">def</span> <span class="nf">save_to_db</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Método para guardar la informacion en la base de datos.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Guardando la informacion de: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Métodos abstractos que deben ser implementados en las subclases</span>
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">make_request</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Método que realiza la petición a la url del sitio web.</span>
<span class="sd">        args: url</span>
<span class="sd">        response: response from request to url</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">get_content</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Método que obtiene el contenido de la url del sitio web.</span>
<span class="sd">        args: response</span>
<span class="sd">        response: content from response of url</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">get_data_from_classes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Método que obtiene la información solicitada.</span>
<span class="sd">        response: data</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>
</code></pre></div>

<p>Clases Concretas que heredan de la clase abstracta</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Pattern</span>
<span class="kn">from</span> <span class="nn">pattern.base</span> <span class="kn">import</span> <span class="n">AbstractClass</span>

<span class="k">class</span> <span class="nc">WebSiteOne</span><span class="p">(</span><span class="n">AbstractClass</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">classes</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="n">url</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">classes</span> <span class="o">=</span> <span class="n">classes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">content</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">response</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">make_request</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Realizando request a la url: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="si">}</span><span class="s2"> con BeatifulSoup&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_content</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Obteniendo el contenido de la url en la clase WebSiteOne&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_data_from_classes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extraer data desde la clase WebSiteOne&quot;</span><span class="p">)</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="c1"># Pattern</span>
<span class="kn">from</span> <span class="nn">pattern.base</span> <span class="kn">import</span> <span class="n">AbstractClass</span>

<span class="k">class</span> <span class="nc">WebSiteTwo</span><span class="p">(</span><span class="n">AbstractClass</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">classes</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="n">url</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">classes</span> <span class="o">=</span> <span class="n">classes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">content</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">response</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">make_request</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Realizando request a la url: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="si">}</span><span class="s2"> con Xpath&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_content</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Obteniendo el contenido de la url en la clase WebSiteTwo&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_data_from_classes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Extraer data desde la clase WebSiteTwo&quot;</span><span class="p">)</span>
</code></pre></div>

<p>Para ejecutar nuestro <strong>template method</strong> debemos crear un cliente:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Pattern</span>
<span class="kn">from</span> <span class="nn">pattern.base</span> <span class="kn">import</span> <span class="n">AbstractClass</span>

<span class="k">def</span> <span class="nf">client_code</span><span class="p">(</span><span class="n">abstract_class</span><span class="p">:</span> <span class="n">AbstractClass</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Cliente encargado de ejecutar nuestro template_method.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">abstract_class</span><span class="o">.</span><span class="n">template_method</span><span class="p">()</span>
</code></pre></div>

<p>Ejecutando el código:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Pattern</span>
<span class="kn">from</span> <span class="nn">pattern.client</span> <span class="kn">import</span> <span class="n">client_code</span>

<span class="c1"># Owner</span>
<span class="kn">from</span> <span class="nn">websites.web_site_one</span> <span class="kn">import</span> <span class="n">WebSiteOne</span>
<span class="kn">from</span> <span class="nn">websites.web_site_two</span> <span class="kn">import</span> <span class="n">WebSiteTwo</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">url</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Ingresa la url: &quot;</span><span class="p">)</span>
    <span class="n">classes</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Ingresa las clases a buscar en el sitio(separados por coma): &quot;</span><span class="p">)</span>
    <span class="n">list_classes</span> <span class="o">=</span> <span class="n">classes</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;, &quot;</span><span class="p">)</span>
    <span class="n">client_code</span><span class="p">(</span><span class="n">WebSiteOne</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">list_classes</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;###################</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">client_code</span><span class="p">(</span><span class="n">WebSiteTwo</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">list_classes</span><span class="p">))</span>
</code></pre></div>

<p>Salida:</p>
<div class="highlight"><pre><span></span><code>Ingresa la url: https://example.com
Ingresa las clases a buscar en el sitio<span class="o">(</span>separados por coma<span class="o">)</span>: price, name, img
Realizando request a la url: https://example.com con BeatifulSoup
Obteniendo el contenido de la url en la clase WebSiteOne
Extraer data desde la clase WebSiteOne
Guardando la informacion de: https://example.com
<span class="c1">###################</span>

Realizando request a la url: https://example.com con Xpath
Obteniendo el contenido de la url en la clase WebSiteTwo
Extraer data desde la clase WebSiteTwo
Guardando la informacion de: https://example.com
</code></pre></div>

<p>Conclusión:</p>
<p>El implementar este patrón tienes sus ventajas como: Poder modificar algunas partes de un algoritmo sin la necesidad de tener que modificar lo todo y sin afectar otras partes, tener menos código duplicado.</p>
<p>Pero me han surgido preguntas ¿Que pasa si tenemos que extraer información de miles de sitios web? ¿Hasta que punto es sostenible tener una clase por sitio? ¿Que pasa si llegamos en ese punto de tener miles de sitios para extraer información? ¿Como lo podríamos refactorizar?, claro que estas preguntas nos las deberíamos hacer hasta alcanzar ese punto en nuestro sistema, por ahora caminemos paso a paso.</p>
<p>Si bien esta implementación se puede mejorar muchisimo, esta me ha ayudado a entender por mucho mejor el patrón. Espero que igual te ayude.</p>
<p>Te dejo el repositorio en <strong>Github</strong>: <a href="https://github.com/IvanMSP/template-method">Template-Method</a></p>
<p>Si tienes dudas/comentarios, con gusto puedes mandarme un DM a <a href="https://www.linkedin.com/in/ivanlopz/">LinkedIn</a> o <a href="https://twitter.com/BawbamGeek">Twitter</a>. 😉</p>
            </section>

            <section class="post-info">
                <div class="post-share">
                    <a class="twitter" href="https://twitter.com/share?text=Template Method&amp;url=./templated-method.html" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    <i class="ic ic-twitter"></i><span class="hidden">Twitter</span>
                    </a>
                    <a class="facebook" href="https://www.facebook.com/sharer/sharer.php?u=./templated-method.html" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                    <i class="ic ic-facebook"></i><span class="hidden">Facebook</span>
                    </a>
                    <a class="googleplus" href="https://plus.google.com/share?url=./templated-method.html" onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                    <i class="ic ic-googleplus"></i><span class="hidden">Google+</span>
                    </a>
                    <div class="clear"></div>
                </div>

                <aside class="post-tags">
<a href="./tag/patterns.html">patterns</a><a href="./tag/python.html">python</a>                </aside>

                <div class="clear"></div>

                <aside class="post-author">


                        <figure class="post-author-avatar">
                            <img src="https://i.imgur.com/gQUjlR5.png" alt="Ivan López" />
                        </figure>
                    <div class="post-author-bio">
                        <h4 class="post-author-name"><a href="./author/ivan.html">Ivan López</a></h4>
                            <p class="post-author-about">Backend Developer.</p>
                            <span class="post-author-location"><i class="ic ic-location"></i> México</span>
                            <span class="post-author-website"><a href="https://bawbamgeek.com"><i class="ic ic-link"></i> Website</a></span>
                        <!-- Social linkes in alphabet order. -->
                            <span class="post-author-linkedin"><a target="_blank" href="https://www.linkedin.com/in/ivanlopz"><i class="ic ic-link"></i> LinkedIn</a></span>
                            <span class="post-author-twitter"><a target="_blank" href="https://twitter.com/BawbamGeek"><i class="ic ic-twitter"></i> Twitter</a></span>
                    </div>
                    <div class="clear"></div>
                </aside>

                </section>


                <aside class="post-nav">
                    <div class="clear"></div>
                </aside>

            </div>
        </article>
    </main>
      <!-- TODO : Body class -->
    <div id="body-class" style="display: none;" class=""></div>

    <footer id="footer">
      <div class="inner">
        <section class="credits">


          <span class="credits-theme">Theme <a href="https://github.com/arulrajnet/attila" rel="nofollow">Attila</a></span>
          <span class="credits-software">Published with <a href="https://github.com/getpelican/pelican" rel="nofollow">Pelican</a></span>
        </section>
      </div>
    </footer>
  </section>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script type="text/javascript" src="./theme/js/script.js"></script>

</body>
</html>